<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will You Be My Valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Gwendolyn:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="hearts-bg" id="hearts-bg"></div>

    <!-- Main page content: bear gif, question, and Yes/No buttons -->
    <div class="content">
        <div class="bear-placeholder">
            <img src="images/bear.gif">
        </div>

        <h1>Will you be my Valentine?</h1>

        <div class="buttons">
            <button class="yes">Yes</button>
            <button class="no">No</button>
        </div>
    </div>

    <script>
        const content = document.querySelector('.content');
        const yesBtn = document.querySelector('.yes');
        const noBtn = document.querySelector('.no');

        // Tracks whether the layout has been pinned (happens on first No hover)
        let pinned = false;

        // "Yes" button: fade out and redirect to the happy page
        yesBtn.addEventListener('click', () => {
            document.body.classList.add('fade-out');
            setTimeout(() => {
                window.location.href = 'happy.html';
            }, 500);
        });

        // "No" button: runs away from the cursor on hover
        noBtn.addEventListener('mouseover', () => {
            // On first hover, pin the content and Yes button in place
            // so layout doesn't shift when No button goes to fixed positioning
            if (!pinned) {
                const contentRect = content.getBoundingClientRect();
                content.style.position = 'fixed';
                content.style.left = contentRect.left + 'px';
                content.style.top = contentRect.top + 'px';
                content.style.width = contentRect.width + 'px';

                const yesRect = yesBtn.getBoundingClientRect();
                yesBtn.style.position = 'fixed';
                yesBtn.style.left = yesRect.left + 'px';
                yesBtn.style.top = yesRect.top + 'px';
                yesBtn.style.zIndex = '10';
                pinned = true;
            }

            // Teleport No button to random position
            const btnW = noBtn.offsetWidth;
            const btnH = noBtn.offsetHeight;
            const x = Math.random() * (window.innerWidth - btnW);
            const y = Math.random() * (window.innerHeight - btnH);
            noBtn.style.position = 'fixed';
            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';
            noBtn.style.zIndex = '10';
        });

        // Floating hearts background animation
        const images = ['images/heart1.png', 'images/heart2.png', 'images/heart3.png', 'images/heart4.png'];
        const container = document.getElementById('hearts-bg');
        const totalHearts = 30;

        // Dynamically create heart elements with randomized CSS custom properties
        for (let i = 0; i < totalHearts; i++) {
            const span = document.createElement('span');
            span.className = 'heart';

            const img = document.createElement('img');
            img.src = images[i % images.length];
            span.appendChild(img);

            // Spread hearts evenly across the width with slight random jitter
            const baseLeft = (i / totalHearts) * 100;
            const jitter = (Math.random() - 0.5) * 5;
            span.style.setProperty('--left', (baseLeft + jitter) + '%');

            // Randomize size, fall speed, start delay, and horizontal sway
            span.style.setProperty('--size', (20 + Math.random() * 40) + 'px');
            span.style.setProperty('--duration', (8 + Math.random() * 12) + 's');
            span.style.setProperty('--delay', -(Math.random() * 20) + 's');
            span.style.setProperty('--sway-duration', (3 + Math.random() * 4) + 's');

            container.appendChild(span);
        }
    </script>
</body>
</html>
