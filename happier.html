<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yay!</title>
    <link href="https://fonts.googleapis.com/css2?family=Gwendolyn:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="hearts-bg" id="hearts-bg"></div>

    <!-- Main page content: hidden gif (revealed later) and celebration heading -->
    <div class="content">
        <div class="bear-placeholder">
            <img src="images/cat_with_gun.gif">
        </div>

        <h1>Hooray!</h1>
    </div>

    <script>
        const heading = document.querySelector('h1');
        const gifDiv = document.querySelector('.bear-placeholder');

        // Hide the gif initially, gets revealed after the heading swap
        gifDiv.style.display = 'none';

        // Confetti explosion effect
        // Spawns 80 small colored pieces that burst outward from the heading
        function spawnConfetti() {
            const colors = ['#e05555', '#4caf50', '#f7c948', '#e53560', '#ff85a2', '#7ec8e3'];

            // Calculate the center of the heading as the confetti origin point
            const rect = heading.getBoundingClientRect();
            const originX = rect.left + rect.width / 2;
            const originY = rect.top + rect.height / 2;

            for (let i = 0; i < 80; i++) {
                // Create a small confetti piece (randomly circle or square)
                const piece = document.createElement('div');
                piece.style.position = 'fixed';
                piece.style.width = (6 + Math.random() * 8) + 'px';
                piece.style.height = (6 + Math.random() * 8) + 'px';
                piece.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                piece.style.left = originX + 'px';
                piece.style.top = originY + 'px';
                piece.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                piece.style.zIndex = '100';
                piece.style.pointerEvents = 'none';
                piece.style.opacity = '1';

                // Randomize flight direction, distance, and duration
                const duration = 1.5 + Math.random() * 2;
                const angle = Math.random() * Math.PI * 2;
                const distance = 200 + Math.random() * 400;
                const dx = Math.cos(angle) * distance;
                const dy = Math.sin(angle) * distance;

                // Animate the piece outward with rotation, fading out as it flies
                piece.style.transition = `transform ${duration}s ease-out, opacity ${duration}s ease-out`;
                document.body.appendChild(piece);
                requestAnimationFrame(() => {
                    piece.style.transform = `translateX(${dx}px) translateY(${dy}px) rotate(${Math.random() * 720}deg)`;
                    piece.style.opacity = '0';
                });

                setTimeout(() => piece.remove(), duration * 1000);
            }
        }

        spawnConfetti();

        // After 2.5s, fade out the heading, swap text, then reveal the gif
        setTimeout(() => {
            heading.style.opacity = '0';
            heading.style.transition = 'opacity 0.5s ease';

            setTimeout(() => {
                heading.textContent = 'You are now my valentine';
                heading.style.opacity = '1';

                // Fade in the cat_with_gun gif
                gifDiv.style.display = '';
                gifDiv.style.opacity = '0';
                requestAnimationFrame(() => {
                    gifDiv.style.transition = 'opacity 0.5s ease';
                    gifDiv.style.opacity = '1';
                });
            }, 500);
        }, 2500);

        // Floating hearts background animation
        const images = ['images/heart1.png', 'images/heart2.png', 'images/heart3.png', 'images/heart4.png'];
        const container = document.getElementById('hearts-bg');
        const totalHearts = 30;

        // Dynamically create heart elements with randomized CSS custom properties
        for (let i = 0; i < totalHearts; i++) {
            const span = document.createElement('span');
            span.className = 'heart';

            const img = document.createElement('img');
            img.src = images[i % images.length];
            span.appendChild(img);

            // Spread hearts evenly across the width with slight random jitter
            const baseLeft = (i / totalHearts) * 100;
            const jitter = (Math.random() - 0.5) * 5;
            span.style.setProperty('--left', (baseLeft + jitter) + '%');

            // Randomize size, fall speed, start delay, and horizontal sway
            span.style.setProperty('--size', (20 + Math.random() * 40) + 'px');
            span.style.setProperty('--duration', (8 + Math.random() * 12) + 's');
            span.style.setProperty('--delay', -(Math.random() * 20) + 's');
            span.style.setProperty('--sway-duration', (3 + Math.random() * 4) + 's');

            container.appendChild(span);
        }
    </script>
</body>
</html>
